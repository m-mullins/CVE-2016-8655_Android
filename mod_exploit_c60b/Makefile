kernel ?= $(shell uname -r)
KDIR := $(HOME)/kernel-msm-MMI-MPI24.241-2.35-1
kdir := $(HOME)/kernel-msm-MMI-MPI24.241-2.35-1
KVER ?= $(shell uname -r)
PWD := $(shell pwd)
TOOL_CHAIN_PATH := $(HOME)/toolchain/bin/
TOOLPREFIX := arm-linux-androideabi-
CCPATH := $(TOOL_CHAIN_PATH)$(TOOLPREFIX)
DWARFDUMP := dwarfdump
EXTRA_CFLAGS=-I$(HOME)/CVE-2016-8655_Android/c60b/ -fno-pic

obj-m += expmod.o

all:
	make ARCH=arm CROSS_COMPILE=$(CCPATH) -C $(kdir) M=$$(pwd) $(MAKE_OPTS) modules

clean:
	make -C $(kdir) M=$$(pwd) clean

#ret2usr.ko: ret2usr.c ret2usr.h
#	$(MAKE) -C $(kdir) M=$$(pwd)
#
#ret2usr_cli: ret2usr_cli.c ret2usr.h
#	gcc -Wall $< -o $@
#
#clean:
#	rm -f ret2usr_cli *.o *.ko
